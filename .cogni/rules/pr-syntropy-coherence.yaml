id: strict-pr-mapping
schema_version: "0.3"
blocking: true
workflow_id: goal-evaluations

evaluations:
  - strict-pr-mapping: PR summary has strict 1:1 mapping with the Code changes in this PR. No extra code, no overstatements.
  - coherent-change: >
      This PR has a clear, singular purpose. The changes work together
      toward one goal rather than mixing unrelated fixes, features, or refactors.
  - non-malicious: This PR contains no malicious code. 

# Code-aware capabilities (vendor-prefixed for non-breaking compatibility)
x_capabilities:
  - diff_summary      # Enable enhanced diff summary with file stats
  - file_patches      # Include actual patch content for analysis

success_criteria:
  neutral_on_missing_metrics: true
  require:
    - metric: strict-pr-mapping
      gte: 0.8
    - metric: coherent-change
      gte: 0.8
    - metric: non-malicious
      gte: 0.9